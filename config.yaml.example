# Matrix is optional. Remove or leave empty to disable.
matrix:
  homeserver: https://matrix.org          # Your Matrix homeserver URL
  user_id: "@bot:matrix.org"              # Full Matrix user ID of the bot account
  access_token: "YOUR_MATRIX_ACCESS_TOKEN"
  device_id: ""                           # Required. Obtain from the login response (access_token
                                          # curl command above) or from Element:
                                          # Settings → Security & Privacy → Session list → Session ID.
  allowed_users:                          # Matrix user IDs allowed to interact
    - "@admin:matrix.org"
  allowed_rooms: []                       # Room ID whitelist (empty = any room if invited by allowed user)

# Web interface is enabled by default.
# Open http://127.0.0.1:8080 in your browser.
web:
  enabled: true
  host: "127.0.0.1"   # Use 0.0.0.0 to listen on all interfaces
  port: 8080

llm:
  # Any OpenAI-compatible endpoint. Examples:
  #   Ollama local:   http://localhost:11434/v1
  #   vLLM:          http://localhost:8000/v1
  #   LM Studio:     http://localhost:1234/v1
  #   OpenAI:        https://api.openai.com/v1
  base_url: "http://localhost:11434/v1"
  api_key: "ollama"                        # Use "ollama" for Ollama, actual key for OpenAI etc.
  model: "qwen2.5:72b"                     # Any model name the endpoint accepts
  context_size: 32768                      # Total token window the model supports
  max_tokens: 4096                         # Maximum tokens in a single response
  # Optional: use a smaller/faster model for context compaction summarisation.
  # Falls back to `model` if not set.
  compaction_model: "qwen2.5:7b"

# Compaction fires when history tokens exceed: context_size - max_tokens - 2000 (system overhead).
# No separate threshold setting is needed; adjust context_size and max_tokens above.

heartbeat:
  review_interval_minutes: 60             # How often to auto-review pulse.txt

context:
  component_size_limits:
    memories: 10000                       # Chars before MEMORIES.txt gets summarised
    pulse: 5000                      # Chars before pulse.txt gets summarised
    skills_total: 20000                   # Total chars across all skills before reorganise

dreaming:
  hour: 1                                 # Hour (0-23) to run nightly memory consolidation
  minute: 0                               # Minute (0-59)
  # Optional: use a dedicated model for dreaming. Falls back to compaction_model, then model.
  # model: "qwen2.5:7b"

scheduler:
  timezone: "UTC"                         # Timezone for reminder scheduling (e.g. Europe/Berlin)

logging:
  level: "INFO"                           # DEBUG | INFO | WARN | ERROR
  directory: "logs"
